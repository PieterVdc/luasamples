REM Action points:
REM 1 ENEMY CREATURE SPAWN POINT
REM 2 ENEMY CREATURE SPAWN POINT
REM 3 ENEMY CREATURE SPAWN POINT
REM 4 ENEMY CREATURE SPAWN POINT
REM 5 ENEMY CREATURE SPAWN POINT
REM 6 ENEMY CREATURE SPAWN POINT
REM 7 ENEMY CREATURE SPAWN POINT
REM 8 ENEMY CREATURE SPAWN POINT
REM 9 ENEMY CREATURE SPAWN POINT
REM 10 ENEMY CREATURE SPAWN POINT
REM 11 ENEMY CREATURE SPAWN POINT
REM 12 ENEMY CREATURE SPAWN POINT
REM 13 ENEMY CREATURE SPAWN POINT
REM 14 ENEMY CREATURE SPAWN POINT 
REM 15 ENEMY CREATURE SPAWN POINT
REM 16 ENEMY CREATURE SPAWN POINT
REM 17 ENEMY CREATURE SPAWN POINT
REM 18 ENEMY CREATURE SPAWN POINT
REM 19 ENEMY CREATURE SPAWN POINT
REM 20 ENEMY CREATURE SPAWN POINT
REM 11 ENEMY CREATURE SPAWN POINT
REM 12 ENEMY CREATURE SPAWN POINT
REM 13 ENEMY CREATURE SPAWN POINT
REM 14 ENEMY CREATURE SPAWN POINT
REM 15 ENEMY CREATURE SPAWN POINT
REM 16 ENEMY CREATURE SPAWN POINT
REM 17 ENEMY CREATURE SPAWN POINT
REM 18 ENEMY CREATURE SPAWN POINT
REM 19 ENEMY CREATURE SPAWN POINT
REM 20 ENEMY CREATURE SPAWN POINT
REM 21 ENEMY CREATURE SPAWN POINT
REM 22 ENEMY CREATURE SPAWN POINT
REM 23 ENEMY CREATURE SPAWN POINT
REM 24 ENEMY CREATURE SPAWN POINT
REM 25 ENEMY CREATURE SPAWN POINT
REM 26 ENEMY CREATURE SPAWN POINT
REM 27 ENEMY CREATURE SPAWN POINT
REM 28 ENEMY CREATURE SPAWN POINT
REM 29 ENEMY CREATURE SPAWN POINT
REM 30 ENEMY CREATURE SPAWN POINT
REM 31 ENEMY CREATURE SPAWN POINT
REM 32 ENEMY CREATURE SPAWN POINT
REM 33 PLAYER CREATURE-BOX SPAWN POINT 2
REM 34 PLAYER CREATURE-BOX SPAWN POINT 3
REM 35 PLAYER CREATURE-BOX SPAWN POINT 4
REM 36 PLAYER CREATURE-BOX SPAWN POINT 5
REM 37 PLAYER CREATURE-BOX SPAWN POINT 6
REM 38 PLAYER CREATURESPAWN POINT 2
REM 39 PLAYER CREATURESPAWN POINT 3
REM 30 PLAYER CREATURESPAWN POINT 4
REM 41 PLAYER CREATURESPAWN POINT 5
REM 42 PLAYER CREATURESPAWN POINT 6
REM 43 PLAYER DISPLAY CREATURE COST 1
REM 44 PLAYER DISPLAY CREATURE COST 2
REM 45 PLAYER DISPLAY CREATURE COST 3
REM 46 PLAYER DISPLAY CREATURE COST 4
REM 47 PLAYER DISPLAY CREATURE COST 5
REM 48 PLAYER DISPLAY CREATURE COST 6
REM 49 PLAYER IMP SPAWN
REM 50 HEART DAMAGE VISUAL EFFECT
REM 51 HEART DAMAGE VISUAL EFFECT
REM 52 HEART DAMAGE VISUAL EFFECT
REM 53 HEART DAMAGE VISUAL EFFECT
REM 54 HEART DAMAGE VISUAL EFFECT
REM 55 HEART DAMAGE VISUAL EFFECT
REM 56 HEART DAMAGE VISUAL EFFECT
REM 57 HEART DAMAGE VISUAL EFFECT
REM 58 HEART DAMAGE VISUAL EFFECT
REM 59 GOLD REWARD SURVIVED
REM 60 GOLD REWARD SURVIVED
REM 61 PLAYER CREATURE-BOX SPAWN POINT 1
REM 62 PLAYER CREATURESPAWN POINT 1
REM 63 BATTLEFIELD CREATURE COUNTER
REM 64 CREATURE KILLER AT WHITE HEART
REM 65 CREATURE SELECTOR COUNTER 
REM 66 CREATURE SELECTOR COUNTER
REM 67 GOLD REWARD SURVIVED
REM 68 GOLD REWARD SURVIVED
REM 69 GOLD REWARD SURVIVED
REM 70 GOLD REWARD SURVIVED
REM 71 GOLD REWARD SURVIVED
REM 72 GOLD REWARD SURVIVED
REM 73 GOLD REWARD SURVIVED
REM 74 CHANGE OWNER RANGE
REM 75 CHANGE OWNER RANGE
REM 76 CHANGE OWNER RANGE
REM 77 CHANGE OWNER RANGE
REM 78 CHANGE OWNER RANGE
REM 79 CHANGE OWNER RANGE
REM 80 GOLD REWARD ROUND

REM Timers:
REM PLAYER0,TIMER0 COUNTDOWN
REM PLAYER0,TIMER1 REMAKE BOX FLOOR TIMER 
REM PLAYER0,TIMER2 RESET REST-BOX FLOOR TIMER 
REM PLAYER0,TIMER3 WAIT TILL WHITE TELEPORT TIMER
REM PLAYER0,TIMER4 GOLD EFFECT TIMER
REM PLAYER0,TIMER5 SUDDEN DEATH

LEVEL_VERSION(1)
COMPUTER_PLAYER(PLAYER1, 0)
SET_COMPUTER_GLOBALS(PLAYER1, 0, 0, 0, 0, 0, 0, 0)
REM Creatur costs average salary(mostly, execpt: DRAGON, HORNY, VAMPIRE)
REM Player start money is average Creature Typ Cost = 6130
START_MONEY(PLAYER0, 2000)

IF(PLAYER0, BOX18_ACTIVATED == 1) rem START GAME
    REVEAL_MAP_RECT(PLAYER0, 133, 121, 70, 70)
    SET_FLAG(PLAYER0, BOX19_ACTIVATED, 1)
    REM Display count of placeable Creatures

    DISPLAY_VARIABLE(Game.PLAYER_COUNTER_CREATURE, Game.MaxCreatures, 0)

    IF(Game.PREPARNG_PHASE == 0)
        NEXT_COMMAND_REUSABLE
        HIDE_VARIABLE
    ENDIF
ENDIF

REM WTF
NEXT_COMMAND_REUSABLE
SET_FLAG(Game.PLAYER0_LEFT_CREATURE_COUNT, 0)
NEXT_COMMAND_REUSABLE
SET_FLAG(Game.PLAYER0_RIGHT_CREATURE_COUNT, 1)

NEXT_COMMAND_REUSABLE
SET_FLAG(Game.PLAYER_COUNTER_CREATURE, 0) rem PLAYER COUNTER CREATURE



QUICK_OBJECTIVE(1, "This is a rudimentary Auto Chess/Auto Battle implementation for Dungeon Keeper -Use the special boxes to select your creature. -Watch your gold, you receive a small amount back each round, and you get a bonus for every creature of yours that survives. -If you want to save gold or have none left, you can fill your battle lines with Imps using the special box. -Each surviving creature deals damage to the enemy heart. There are up to 9 rounds with an increasing number of creatures. -If both hearts are still standing after 9 rounds, the Keeper with the most victories wins. -The opponent receives and places their creatures completely randomly. -You can select from randomly chosen creatures each round (their level is set at the beginning of the game and does not change between rounds). -If you get stuck, you can restart the round using the special box, but note that you won't get back the gold you spent in that round.")

NEXT_COMMAND_REUSABLE
KILL_CREATURE(ALL_PLAYERS, ANY_CREATURE, AT_ACTION_POINT[64], 1)
SET_GAME_RULE(DungeonHeartHealHealth, 0)
SET_TIMER(PLAYER0, TIMER6)


IF(PLAYER0, DUNGEON_DESTROYED == 0)
    IF(PLAYER1, DUNGEON_DESTROYED == 0)

        prepPhase()
        REM Preparing phase
        If(Game.PREPARNG_PHASE == 1)
            NEXT_COMMAND_REUSABLE
            SET_PLAYER_MODIFIER(PLAYER0, SpellDamage, 100)
            NEXT_COMMAND_REUSABLE
            SET_PLAYER_MODIFIER(PLAYER0, Strength, 100)
            NEXT_COMMAND_REUSABLE
            SET_PLAYER_MODIFIER(PLAYER1, SpellDamage, 100)
            NEXT_COMMAND_REUSABLE
            SET_PLAYER_MODIFIER(PLAYER1, Strength, 100)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER0, TIMER5)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.CTA_FLAGS, 0)
            NEXT_COMMAND_REUSABLE
            DISPLAY_COUNTDOWN(PLAYER0, TIMER6, 1, 0)
            NEXT_COMMAND_REUSABLE
            MAGIC_AVAILABLE(PLAYER0, POWER_CALL_TO_ARMS, 0, 0)
            NEXT_COMMAND_REUSABLE
            MAGIC_AVAILABLE(PLAYER1, POWER_CALL_TO_ARMS, 0, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TUNNELLER, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(BILE_DEMON, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(BUG, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DARK_MISTRESS, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DEMONSPAWN, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DRAGON, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DRUID, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(FLY, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(GHOST, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(HELL_HOUND, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(HORNY, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(ORC, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(SKELETON, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(SORCEROR, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(SPIDER, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TENTACLE, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TIME_MAGE, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TROLL, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(VAMPIRE, BaseSpeed, 0)
            NEXT_COMMAND_REUSABLE
            MAGIC_AVAILABLE(PLAYER0, POWER_HAND, 1, 1)
            NEXT_COMMAND_REUSABLE
            SET_GAME_RULE(BodyRemainsFor, 1)
            REM SPECIAL ROUND RESTART
            IF(PLAYER0, BOX19_ACTIVATED == 1)
                NEXT_COMMAND_REUSABLE
                USE_POWER(PLAYER_GOOD, POWER_HOLD_AUDIENCE, 1)
                NEXT_COMMAND_REUSABLE
                MOVE_CREATURE(PLAYER0, ANY_CREATURE, AT_ACTION_POINT[63], 20, PLAYER_GOOD, EFFECT_BALL_PUFF_RED)
                NEXT_COMMAND_REUSABLE
                MOVE_CREATURE(PLAYER1, ANY_CREATURE, AT_ACTION_POINT[63], 20, PLAYER_GOOD, EFFECT_BALL_PUFF_BLUE)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.Player1CreatureCount, 0)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.CREATURE_RANDOM, 3)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(PLAYER0, BOX19_ACTIVATED, 2)
            ENDIF
            REM SPECIAL ADD FREE IMP
            IF(PLAYER0, BOX20_ACTIVATED == 1)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.CREATURE_RANDOM, 3)
                NEXT_COMMAND_REUSABLE
                ADD_CREATURE_TO_LEVEL(PLAYER0, TUNNELLER, 49, 1, 1, 0)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(PLAYER0, BOX20_ACTIVATED, 2)
            ENDIF
        ENDIF

        If(Game.FIGHT_PHASE_ENDED > 0)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(40, 40, LIBRARY_WALL, MATCH)
        ENDIF

        REM PREPARE phase
        REM 4-1 Randomise Creature Boxes
        IF(Game.CREATURE_RANDOM == 1)
            IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 4)
                NEXT_COMMAND_REUSABLE
                RANDOMISE_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 3)
            ENDIF
            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 6)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 0)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.CREATURE_RANDOM, 2)
            ENDIF

            REM row1
            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 0)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 61, 0, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, BILE_DEMON, 62, 1, DRAWFROM(2 ~ 8), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM1, 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 1)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 33, 1, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, BUG, 38, 1, DRAWFROM(6 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM2, 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 2)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 34, 2, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, DARK_MISTRESS, 39, 1, DRAWFROM(4 ~ 8), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM3, 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 3)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 35, 3, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, DEMONSPAWN, 40, 1, DRAWFROM(4 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM4, 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 4)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 36, 4, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, DRAGON, 41, 1, DRAWFROM(4 ~ 8), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM5, 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 5)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 37, 5, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, DRUID, 42, 1, DRAWFROM(3 ~ 8), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM6, 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF


            REM row2
            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 0)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 61, 6, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, FLY, 62, 1, DRAWFROM(6 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM1, 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 1)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 33, 7, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, GHOST, 38, 1, DRAWFROM(4 ~ 8), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM2, 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 2)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 34, 8, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, HELL_HOUND, 39, 1, DRAWFROM(5 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM3, 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 3)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 35, 9, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, HORNY, 40, 1, DRAWFROM(5 ~ 8), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM4, 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 4)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 36, 10, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, ORC, 41, 1, DRAWFROM(3 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM5, 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 5)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 1)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 37, 11, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, SKELETON, 42, 1, DRAWFROM(4 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM6, 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            REM row3
            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 0)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 61, 12, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, SORCEROR, 62, 1, DRAWFROM(4 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM1, 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 1)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 33, 13, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, SPIDER, 38, 1, DRAWFROM(4 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM2, 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 2)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 34, 14, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, TENTACLE, 39, 1, DRAWFROM(5 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM3, 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 3)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 35, 15, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, TIME_MAGE, 40, 1, DRAWFROM(4 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM4, 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 4)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 36, 16, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, TROLL, 41, 1, DRAWFROM(5 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM5, 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF

            IF(Game.PLAYER_ROW_CREATURE_RANDOM == 5)
                IF(Game.PLAYER_COLLUM_CREATURE_RANDOM == 2)
                    NEXT_COMMAND_REUSABLE
                    ADD_OBJECT_TO_LEVEL(SPECBOX_CUSTOM, 37, 17, PLAYER0)
                    NEXT_COMMAND_REUSABLE
                    ADD_CREATURE_TO_LEVEL(PLAYER_GOOD, VAMPIRE, 42, 1, DRAWFROM(4 ~ 10), 0)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.CREATURE_GOLDPRICE_COLLUM6, 3)
                    NEXT_COMMAND_REUSABLE
                    ADD_TO_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 1)
                    NEXT_COMMAND_REUSABLE
                    SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
                ENDIF
            ENDIF
        ENDIF

        IF(Game.CREATURE_RANDOM != 2)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER0, TIMER4)
        ENDIF

        IF(PLAYER0, TIMER4 > 25)
            REM row1
            REM BILE DEMON
            IF(Game.CREATURE_GOLDPRICE_COLLUM1 == 1)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 43, 250)
            ENDIF
            REM BUG
            IF(Game.CREATURE_GOLDPRICE_COLLUM2 == 1)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 44, 50)
            ENDIF
            REM DARK MISTRESS
            IF(Game.CREATURE_GOLDPRICE_COLLUM3 == 1)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 45, 450)
            ENDIF
            REM DEMONSPAWN
            IF(Game.CREATURE_GOLDPRICE_COLLUM4 == 1)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 46, 180)
            ENDIF
            REM DRAGON
            IF(Game.CREATURE_GOLDPRICE_COLLUM5 == 1)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 47, 700)
            ENDIF
            REM DRUID
            IF(Game.CREATURE_GOLDPRICE_COLLUM6 == 1)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 48, 350)
            ENDIF
            REM row2
            REM FLY
            IF(Game.CREATURE_GOLDPRICE_COLLUM1 == 2)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 43, 10)
            ENDIF
            REM GHOST
            IF(Game.CREATURE_GOLDPRICE_COLLUM2 == 2)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 44, 50)
            ENDIF
            REM HELL HOUND
            IF(Game.CREATURE_GOLDPRICE_COLLUM3 == 2)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 45, 170)
            ENDIF
            REM HORNY
            IF(Game.CREATURE_GOLDPRICE_COLLUM4 == 2)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 46, 1200)
            ENDIF
            REM ORC
            IF(Game.CREATURE_GOLDPRICE_COLLUM5 == 2)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 47, 200)
            ENDIF
            REM SKELETON
            IF(Game.CREATURE_GOLDPRICE_COLLUM6 == 2)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 48, 180)
            ENDIF

            REM row3
            REM WARLOCK
            IF(Game.CREATURE_GOLDPRICE_COLLUM1 == 3)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 43, 100)
            ENDIF
            REM SPIDER
            IF(Game.CREATURE_GOLDPRICE_COLLUM2 == 3)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 44, 80)
            ENDIF
            REM TENTACLE
            IF(Game.CREATURE_GOLDPRICE_COLLUM3 == 3)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 45, 110)
            ENDIF
            REM TIMEMAGE
            IF(Game.CREATURE_GOLDPRICE_COLLUM4 == 3)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 46, 420)
            ENDIF
            REM TROLL
            IF(Game.CREATURE_GOLDPRICE_COLLUM5 == 3)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 47, 130)
            ENDIF
            REM VAMPIRE
            IF(Game.CREATURE_GOLDPRICE_COLLUM6 == 3)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 48, 600)
            ENDIF
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER0, TIMER4)
        ENDIF


        REM 4-2 Activate Creature Boxes
        IF(Game.CREATURE_RANDOM == 2)
            REM row1
            activateCreatureBoxes()
        ENDIF

        IF(Game.CREATURE_RANDOM < 6)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER0, TIMER3)
        ENDIF
        IF(PLAYER0, TIMER3 > 10)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.CREATURE_RANDOM, 3)
        ENDIF

        REM 4-3 Remove the other Boxes and Creatrures
        IF(Game.CREATURE_RANDOM == 3)
            NEXT_COMMAND_REUSABLE
            USE_SPELL_ON_PLAYERS_CREATURES(PLAYER_GOOD, ANY_CREATURE, SPELL_TELEPORT)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(40, 46, LAVA, MATCH)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.DESTROY_BOXES_TIMER, 1)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.CREATURE_RANDOM, 4)
        ENDIF

        REM Timer to remake the floor
        IF(Game.DESTROY_BOXES_TIMER == 0)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER0, TIMER1)
        ENDIF
        IF(PLAYER0, TIMER1 > 5)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.DESTROY_BOXES_TIMER, 0)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(40, 46, PATH, MATCH)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_OWNER(40, 46, PLAYER0, MATCH)
        ENDIF

        REM 4-4 Wait before continue
        IF(Game.DESTROY_BOXES_TIMER == 0)
            IF(Game.CREATURE_RANDOM == 4)
                REM be sure to you have take away your creature
                NEXT_COMMAND_REUSABLE
                COUNT_CREATURES_AT_ACTION_POINT(65, PLAYER0, ANY_CREATURE, Game.PLAYER0_LEFT_CREATURE_COUNT)
                NEXT_COMMAND_REUSABLE
                COUNT_CREATURES_AT_ACTION_POINT(66, PLAYER0, ANY_CREATURE, Game.PLAYER0_RIGHT_CREATURE_COUNT)
                REM WTF
                IF(Game.PLAYER0_LEFT_CREATURE_COUNT == Game.PLAYER0_RIGHT_CREATURE_COUNT)
                    IF(Game.PREPARNG_PHASE == 1)
                        NEXT_COMMAND_REUSABLE
                        SET_FLAG(Game.DESTROY_BOXES_TIMER, 1)
                        NEXT_COMMAND_REUSABLE
                        SET_FLAG(Game.CREATURE_RANDOM, 5)
                    ENDIF
                ENDIF
            ENDIF
        ENDIF

        REM 4-5 Place Enemy Creature
        IF(Game.CREATURE_RANDOM == 5)
            placeEnemyCreatures()
        ENDIF

        REM PREPARING COUNTDOWN-1
        IF(Game.PREPARING_COUNTDOWN == 1)
            NEXT_COMMAND_REUSABLE
            BONUS_LEVEL_TIME(0, 1)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER0, TIMER0)
        ENDIF
        IF(Game.PREPARING_COUNTDOWN == 0)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.CREATURE_RANDOM, 3)
            NEXT_COMMAND_REUSABLE
            BONUS_LEVEL_TIME(60, 1)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.PREPARNG_PHASE, 0)
            REM Reset Reset- and Free-Imp-Box-1
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(38, 46, LAVA, NONE)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(38, 48, LAVA, NONE)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.RESET_RESET-BOX_AND_FREE-IMP-BOX, 0)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.PREPARING_COUNTDOWN, 2)
        ENDIF

        REM Reset Reset- and Free-Imp-Box-2
        IF(Game.RESET_RESET-BOX_AND_FREE-IMP-BOX == 1)
            NEXT_COMMAND_REUSABLE
            SET_TIMER(PLAYER0, TIMER2)
        ENDIF
        REM Reset Reset- and Free-Imp-Box-3
        IF(PLAYER0, TIMER2 > 5)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(38, 46, PATH, NONE)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_OWNER(38, 46, PLAYER0, NONE)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(38, 48, PATH, NONE)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_OWNER(38, 48, PLAYER0, NONE)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.RESET_RESET-BOX_AND_FREE-IMP-BOX, 1)
        ENDIF

        REM PREPARING COUNTDOWN-2
        IF(PLAYER0, TIMER0 > 60)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.FIGHT_PHASE_ENDED, 0)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.PREPARING_COUNTDOWN, 1)
        ENDIF


        REM END PREPERING PHASE 
        IF(Game.PREPARNG_PHASE == 1)
            NEXT_COMMAND_REUSABLE
            COUNT_CREATURES_AT_ACTION_POINT(63, PLAYER0, ANY_CREATURE, Game.PLAYER_COUNTER_CREATURE)
            REM Wait for place all Creature to start Countdown
            IF(Game.PLAYER_COUNTER_CREATURE == Game.MaxCreatures)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.PREPARING_COUNTDOWN, 0)
            ENDIF
        ENDIF

        REM Fight phase
        If(Game.FIGHT_PHASE_ENDED == 0)
            NEXT_COMMAND_REUSABLE
            CHANGE_SLAB_TYPE(40, 40, BRIDGE_FRAME, MATCH)
            IF(Game.CTA_FLAGS == 0)
                NEXT_COMMAND_REUSABLE
                USE_POWER_AT_LOCATION(PLAYER0, 63, POWER_CALL_TO_ARMS, 3, 1)
                NEXT_COMMAND_REUSABLE
                USE_POWER_AT_LOCATION(PLAYER1, 63, POWER_CALL_TO_ARMS, 3, 1)
                NEXT_COMMAND_REUSABLE
                DISPLAY_COUNTDOWN(PLAYER0, TIMER5, 860, 1)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.CTA_FLAGS, 1)
            ENDIF
            NEXT_COMMAND_REUSABLE
            MAGIC_AVAILABLE(PLAYER0, POWER_CALL_TO_ARMS, 1, 1)
            NEXT_COMMAND_REUSABLE
            MAGIC_AVAILABLE(PLAYER1, POWER_CALL_TO_ARMS, 1, 1)
            IF(PLAYER0, TIMER5 > 860)
            NEXT_COMMAND_REUSABLE
            USE_POWER_AT_POS(PLAYER0,91,37,POWER_CAVE_IN,1,1)
                NEXT_COMMAND_REUSABLE
                SET_PLAYER_MODIFIER(PLAYER0, SpellDamage, 500)
                NEXT_COMMAND_REUSABLE
                SET_PLAYER_MODIFIER(PLAYER0, Strength, 500)
                NEXT_COMMAND_REUSABLE
                SET_PLAYER_MODIFIER(PLAYER1, SpellDamage, 500)
                NEXT_COMMAND_REUSABLE
                SET_PLAYER_MODIFIER(PLAYER1, Strength, 500)
            ENDIF
            NEXT_COMMAND_REUSABLE
            SET_GAME_RULE(BodyRemainsFor, 2000)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TUNNELLER, BaseSpeed, 96)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(BILE_DEMON, BaseSpeed, 48)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(BUG, BaseSpeed, 48)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DARK_MISTRESS, BaseSpeed, 64)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DEMONSPAWN, BaseSpeed, 48)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DRAGON, BaseSpeed, 32)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(DRUID, BaseSpeed, 32)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(FLY, BaseSpeed, 128)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(GHOST, BaseSpeed, 64)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(HELL_HOUND, BaseSpeed, 96)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(HORNY, BaseSpeed, 96)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(ORC, BaseSpeed, 48)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(SKELETON, BaseSpeed, 64)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(SORCEROR, BaseSpeed, 32)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(SPIDER, BaseSpeed, 48)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TENTACLE, BaseSpeed, 32)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TIME_MAGE, BaseSpeed, 32)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(TROLL, BaseSpeed, 48)
            NEXT_COMMAND_REUSABLE
            SET_CREATURE_CONFIGURATION(VAMPIRE, BaseSpeed, 56)
            NEXT_COMMAND_REUSABLE
            MAGIC_AVAILABLE(PLAYER0, POWER_HAND, 0, 0)
        ENDIF


        REM Evaluation phase
        REM Process heart damage
        If(Game.PREPARNG_PHASE == 0)
            IF(PLAYER0, TOTAL_CREATURES == 0)
                if(PLAYER1, TOTAL_CREATURES > 0) then
                    damageHeart(PLAYER0)
                end

                ADD_TO_FLAG(Game.WINFLAG_FOR_COMPUTER, 1)
                SET_FLAG(Game.END_PASE, 1)
                CREATE_EFFECTS_LINE(COMBAT, PLAYER0, 0, 6, 10, EFFECTELEMENT_BLUE_SPARKLES_LARGE)
                CREATE_EFFECT(EFFECT_WORD_OF_POWER, PLAYER0)
                COMPUTE_FLAG(PLAYER3, FLAG6, SET, PLAYER1, HORNY, 0)
            ENDIF
            IF(PLAYER1, TOTAL_CREATURES == 0)
                if(PLAYER0, TOTAL_CREATURES > 0)
                    damageHeart(PLAYER1)

                processPlayerReward(PLAYER0.TOTAL_CREATURES)

                ADD_TO_FLAG(Game.WINFLAG_FOR_PLAYER, 1)
                SET_FLAG(Game.END_PASE, 1)
                ADD_HEART_HEALTH(PLAYER1, -1500)
                CREATE_EFFECTS_LINE(COMBAT, PLAYER1, 0, 6, 10, EFFECTELEMENT_RED_SPARKLES_LARGE)
                CREATE_EFFECT(EFFECT_WORD_OF_POWER, PLAYER1)
            ENDIF
        ENDIF





        REM End phase
        If(Game.END_PASE == 1)
            IF(PLAYER0, BOX20_ACTIVATED == 2)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(PLAYER0, BOX20_ACTIVATED, 0)
            ENDIF
            If(Game.MaxCreatures == 1)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 500)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 500)
            ENDIF
            If(Game.MaxCreatures == 2)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 550)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 550)
            ENDIF
            If(Game.MaxCreatures == 3)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 600)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 600)
            ENDIF
            If(Game.MaxCreatures == 4)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 650)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 650)
            ENDIF
            If(Game.MaxCreatures == 5)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 700)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 700)
            ENDIF
            If(Game.MaxCreatures == 6)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 750)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 750)
            ENDIF
            If(Game.MaxCreatures == 7)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 800)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 800)
            ENDIF
            If(Game.MaxCreatures == 8)
                NEXT_COMMAND_REUSABLE
                ADD_GOLD_TO_PLAYER(PLAYER0, 850)
                NEXT_COMMAND_REUSABLE
                CREATE_EFFECT(EFFECTELEMENT_PRICE, 80, 850)
            ENDIF
            If(Game.PREPARNG_PHASE == 0)
                NEXT_COMMAND_REUSABLE
                ADD_TO_FLAG(Game.MaxCreatures, 1)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.PREPARNG_PHASE, 1)
                REM Respawn RESET-BOX
                NEXT_COMMAND_REUSABLE
                ADD_OBJECT_TO_LEVEL_AT_POS(SPECBOX_CUSTOM, 115, 139, 19, PLAYER0)
                NEXT_COMMAND_REUSABLE
                ADD_OBJECT_TO_LEVEL_AT_POS(SPECBOX_CUSTOM, 115, 145, 20, PLAYER0)
                NEXT_COMMAND_REUSABLE
                SET_FLAG(Game.END_PASE, 0)
            ENDIF
            NEXT_COMMAND_REUSABLE
            MOVE_CREATURE(PLAYER0, ANY_CREATURE, AT_ACTION_POINT[63], 20, PLAYER_GOOD, EFFECT_BALL_PUFF_RED)
            NEXT_COMMAND_REUSABLE
            MOVE_CREATURE(PLAYER1, ANY_CREATURE, AT_ACTION_POINT[63], 20, PLAYER_GOOD, EFFECT_BALL_PUFF_BLUE)
            REM Round reward
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.PLAYER_ROW_CREATURE_RANDOM, 0)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.PLAYER_COLLUM_CREATURE_RANDOM, 4)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.FIGHT_PHASE_ENDED, 1)
            NEXT_COMMAND_REUSABLE
            SET_FLAG(Game.Player1CreatureCount, 0)
        ENDIF
    ENDIF
ENDIF
REM GAME END
IF(Game.MaxCreatures == 10)
    HIDE_VARIABLE
    IF(Game.WINFLAG_FOR_COMPUTER > Game.WINFLAG_FOR_PLAYER)
        SET_HEART_HEALTH(PLAYER0, 0)
        CREATE_EFFECTS_LINE(PLAYER1, PLAYER0, 0, 6, 10, EFFECTELEMENT_BLUE_SPARKLES_LARGE)
        LOSE_GAME
        NEXT_COMMAND_REUSABLE
        KILL_CREATURE(ALL_PLAYERS, ANY_CREATURE, ANYWHERE, 10)
        SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, MaximumSize, 1)
        SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, Genre, Furniture)
    ENDIF
    IF(Game.WINFLAG_FOR_COMPUTER < Game.WINFLAG_FOR_PLAYER)
        SET_HEART_HEALTH(PLAYER1, 0)
        CREATE_EFFECTS_LINE(PLAYER0, PLAYER1, 0, 6, 10, EFFECTELEMENT_RED_SPARKLES_LARGE)
        WIN_GAME
        NEXT_COMMAND_REUSABLE
        KILL_CREATURE(ALL_PLAYERS, ANY_CREATURE, ANYWHERE, 10)
        SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, MaximumSize, 1)
        SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, Genre, Furniture)
    ENDIF
ENDIF
IF(PLAYER1, DUNGEON_DESTROYED == 1)
    CREATE_EFFECTS_LINE(PLAYER0, PLAYER1, 0, 6, 10, EFFECTELEMENT_RED_SPARKLES_LARGE)
    HIDE_VARIABLE
    WIN_GAME
    NEXT_COMMAND_REUSABLE
    KILL_CREATURE(ALL_PLAYERS, ANY_CREATURE, ANYWHERE, 10)
    SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, MaximumSize, 1)
    SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, Genre, Furniture)
ENDIF
IF(PLAYER0, HEART_HEALTH < 100)
    CREATE_EFFECTS_LINE(PLAYER1, PLAYER0, 0, 6, 10, EFFECTELEMENT_BLUE_SPARKLES_LARGE)
    HIDE_VARIABLE
    LOSE_GAME
    NEXT_COMMAND_REUSABLE
    KILL_CREATURE(ALL_PLAYERS, ANY_CREATURE, ANYWHERE, 10)
    SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, MaximumSize, 1)
    SET_OBJECT_CONFIGURATION(SPECBOX_CUSTOM, Genre, Furniture)
ENDIF

RUN_AFTER_VICTORY(1)